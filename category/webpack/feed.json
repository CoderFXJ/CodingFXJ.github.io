{
    "version": "https://jsonfeed.org/version/1",
    "title": "CodingFXJ'Blog • All posts by \"webpack\" category",
    "description": "",
    "home_page_url": "https://CodingFXJ.github.io",
    "items": [
        {
            "id": "https://codingfxj.github.io/2021/09/15/Webpack4%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/",
            "url": "https://codingfxj.github.io/2021/09/15/Webpack4%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/",
            "title": "Webpack4学习总结",
            "date_published": "2021-09-15T11:04:15.000Z",
            "content_html": "<h1 id=\"webpack学习总结\"><a class=\"markdownIt-Anchor\" href=\"#webpack学习总结\">#</a> Webpack 学习总结</h1>\n<p><strong>Webpack</strong>：是一种<emp>前端资源构建工具</emp>，一个<wavy>静态模块打包器</wavy>(module bundler)。</p>\n<img src=\"https://gitee.com/GiteeFXJ/picstore/raw/master/pics/20210915191904.png\"/>\n<h3 id=\"webpack五个核心概念\"><a class=\"markdownIt-Anchor\" href=\"#webpack五个核心概念\">#</a> webpack 五个核心概念</h3>\n<h4 id=\"一-entry\"><a class=\"markdownIt-Anchor\" href=\"#一-entry\">#</a> 一、Entry</h4>\n<p>​\t入口 (Entry) 指示 webpack 以哪个文件为入口起点开始打包</p>\n<h4 id=\"二-output\"><a class=\"markdownIt-Anchor\" href=\"#二-output\">#</a> 二、Output</h4>\n<p>​\t输出 (Output) 指示 webpack 打包后的资源 bundles 输出到哪里去，以及如何命名。</p>\n<h4 id=\"三-loader\"><a class=\"markdownIt-Anchor\" href=\"#三-loader\">#</a> 三、Loader</h4>\n<p>​\tLoader   让   webpack   能 够 去 处 理 那 些 非   JavaScript   文 件</p>\n<h4 id=\"四-plugins\"><a class=\"markdownIt-Anchor\" href=\"#四-plugins\">#</a> 四、 Plugins</h4>\n<p>​\t插件 (Plugins) 可以用于执行范围更广的任务。插件的范围包括，从打包优化和压缩， 一直到重新定义环境中的变量等。</p>\n<h4 id=\"五-mode\"><a class=\"markdownIt-Anchor\" href=\"#五-mode\">#</a> 五、 Mode</h4>\n<p>​\t指示  webpack  使用相应模式的配置。</p>\n<img src=\"https://gitee.com/GiteeFXJ/picstore/raw/master/pics/20210915193027.png\"/>\n<h3 id=\"初始化配置\"><a class=\"markdownIt-Anchor\" href=\"#初始化配置\">#</a> 初始化配置</h3>\n<h5 id=\"初始化packagejson\"><a class=\"markdownIt-Anchor\" href=\"#初始化packagejson\">#</a> 初始化 package.json</h5>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm init</span><br></pre></td></tr></table></figure>\n<h5 id=\"下载安装webpack\"><a class=\"markdownIt-Anchor\" href=\"#下载安装webpack\">#</a> 下载安装 webpack</h5>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install webpack webpack-cli -g </span><br><span class=\"line\">npm install webpack webpack-cli -D</span><br></pre></td></tr></table></figure>\n<h5 id=\"编译打包\"><a class=\"markdownIt-Anchor\" href=\"#编译打包\">#</a> 编译打包</h5>\n<p><strong>开发环境：</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">webpack src/js/index.js -o build/js/built.js --mode=development</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>功能：webpack  能够编译打包  js  和  json  文件，并且能将  es6  的 模块化语法转换成 浏览器能识别的语法。</p>\n</blockquote>\n<p><strong>生产环境：</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">webpack src/js/index.js -o build/js/built.js --mode=production</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>功能：在<span class='p red'>开发配置</span>功能上多一个功能，压缩代码。</p>\n</blockquote>\n<p><strong>结论</strong><br>\n webpack 能够编译打包  js  和  json  文件。<br>\n能将  <span class='p green'>es6 的 模块化语法</span>转换成浏览器能识别的语法。<br>\n能压缩代码。</p>\n<p><strong>问题</strong><br>\n不能编译打包  css、img 等文件。<br>\n不能将 <span class='p red'>js 的es6 基本语法</span>转化为  es5  以下语法。</p>\n<h3 id=\"开发环境详细配置\"><a class=\"markdownIt-Anchor\" href=\"#开发环境详细配置\">#</a> 开发环境详细配置</h3>\n<blockquote>\n<p>loader:  1. 下载  \t2. 使用（配置 loader）</p>\n<p>plugins: 1. 下载 \t2. 引入 \t3. 使用</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  webpack.config.js  webpack的配置文件</span></span><br><span class=\"line\"><span class=\"comment\">    作用: 指示 webpack 干哪些活（当你运行 webpack 指令时，会加载里面的配置）</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">    所有构建工具都是基于nodejs平台运行的~模块化默认采用commonjs。</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// resolve用来拼接绝对路径的方法</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// webpack配置</span></span><br><span class=\"line\">  <span class=\"comment\">// 入口起点</span></span><br><span class=\"line\">  <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/index.js&#x27;</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 输出</span></span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 输出文件名</span></span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;built.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 输出路径</span></span><br><span class=\"line\">    <span class=\"comment\">// __dirname nodejs的变量，代表当前文件的目录绝对路径</span></span><br><span class=\"line\">    <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// loader的配置</span></span><br><span class=\"line\">  <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">   <span class=\"comment\">// 详细loader配置</span></span><br><span class=\"line\">      <span class=\"comment\">// 不同文件必须配置不同loader处理</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 匹配哪些文件</span></span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 使用哪些loader进行处理</span></span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          <span class=\"comment\">// use数组中loader执行顺序：从右到左，从下到上 依次执行</span></span><br><span class=\"line\">          <span class=\"comment\">// 创建style标签，将js中的样式资源插入进行，添加到head中生效</span></span><br><span class=\"line\">          <span class=\"string\">&#x27;style-loader&#x27;</span>,</span><br><span class=\"line\">          <span class=\"comment\">// 将css文件变成commonjs模块加载js中，里面内容是样式字符串</span></span><br><span class=\"line\">          <span class=\"string\">&#x27;css-loader&#x27;</span></span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.less$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          <span class=\"string\">&#x27;style-loader&#x27;</span>,</span><br><span class=\"line\">          <span class=\"string\">&#x27;css-loader&#x27;</span>,</span><br><span class=\"line\">          <span class=\"comment\">// 将less文件编译成css文件</span></span><br><span class=\"line\">          <span class=\"comment\">// 需要下载 less-loader和less</span></span><br><span class=\"line\">          <span class=\"string\">&#x27;less-loader&#x27;</span></span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">         &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 问题：默认处理不了html中img图片</span></span><br><span class=\"line\">        <span class=\"comment\">// 处理图片资源</span></span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.(jpg|png|gif)$/</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 使用一个loader</span></span><br><span class=\"line\">        <span class=\"comment\">// 下载 url-loader file-loader</span></span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;url-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"comment\">// 图片大小小于8kb，就会被base64处理</span></span><br><span class=\"line\">          <span class=\"comment\">// 优点: 减少请求数量（减轻服务器压力）</span></span><br><span class=\"line\">          <span class=\"comment\">// 缺点：图片体积会更大（文件请求速度更慢）</span></span><br><span class=\"line\">          <span class=\"attr\">limit</span>: <span class=\"number\">8</span> * <span class=\"number\">1024</span>,</span><br><span class=\"line\">          <span class=\"comment\">// 问题：因为url-loader默认使用es6模块化解析，而html-loader引入图片是commonjs</span></span><br><span class=\"line\">          <span class=\"comment\">// 解析时会出问题：[object Module]</span></span><br><span class=\"line\">          <span class=\"comment\">// 解决：关闭url-loader的es6模块化，使用commonjs解析</span></span><br><span class=\"line\">          <span class=\"attr\">esModule</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">          <span class=\"comment\">// 给图片进行重命名</span></span><br><span class=\"line\">          <span class=\"comment\">// [hash:10]取图片的hash的前10位</span></span><br><span class=\"line\">          <span class=\"comment\">// [ext]取文件原来扩展名</span></span><br><span class=\"line\">          <span class=\"attr\">name</span>: <span class=\"string\">&#x27;[hash:10].[ext]&#x27;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">       &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.html$/</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 处理html文件的img图片（负责引入img，从而能被url-loader进行处理）</span></span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;html-loader&#x27;</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">         <span class=\"comment\">// 打包其他资源(除了html/js/css资源以外的资源)</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 排除css/js/html资源</span></span><br><span class=\"line\">        <span class=\"attr\">exclude</span>: <span class=\"regexp\">/\\.(css|js|html|less)$/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;file-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">name</span>: <span class=\"string\">&#x27;[hash:10].[ext]&#x27;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// plugins的配置</span></span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">     </span><br><span class=\"line\">    <span class=\"comment\">// 插件一：html-webpack-plugin</span></span><br><span class=\"line\">    <span class=\"comment\">// 功能：默认会创建一个空的HTML，自动引入打包输出的所有资源（JS/CSS）</span></span><br><span class=\"line\">    <span class=\"comment\">// 需求：需要有结构的HTML文件</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      <span class=\"comment\">// 复制 &#x27;./src/index.html&#x27; 文件，并自动引入打包输出的所有资源（JS/CSS）</span></span><br><span class=\"line\">      <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      </span><br><span class=\"line\">  ],</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">  <span class=\"comment\">// 模式</span></span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;development&#x27;</span>, <span class=\"comment\">// 开发模式</span></span><br><span class=\"line\">  <span class=\"comment\">// mode: &#x27;production&#x27;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">     <span class=\"comment\">// 开发服务器 devServer：用来自动化（自动编译，自动打开浏览器，自动刷新浏览器~~）</span></span><br><span class=\"line\">  <span class=\"comment\">// 特点：只会在内存中编译打包，不会有任何输出</span></span><br><span class=\"line\">  <span class=\"comment\">// 启动devServer指令为：npx webpack-dev-server</span></span><br><span class=\"line\">  <span class=\"attr\">devServer</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 项目构建后路径</span></span><br><span class=\"line\">    <span class=\"attr\">contentBase</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>),</span><br><span class=\"line\">    <span class=\"comment\">// 启动gzip压缩</span></span><br><span class=\"line\">    <span class=\"attr\">compress</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 端口号</span></span><br><span class=\"line\">    <span class=\"attr\">port</span>: <span class=\"number\">3000</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 自动打开浏览器</span></span><br><span class=\"line\">    <span class=\"attr\">open</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"生产环境详细配置\"><a class=\"markdownIt-Anchor\" href=\"#生产环境详细配置\">#</a> 生产环境详细配置</h3>\n<h4 id=\"下包\"><a class=\"markdownIt-Anchor\" href=\"#下包\">#</a> 下包</h4>\n<blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --save-dev mini-css-extract-plugin</span><br></pre></td></tr></table></figure>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> MiniCssExtractPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;mini-css-extract-plugin&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> OptimizeCssAssetsWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;optimize-css-assets-webpack-plugin&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设置nodejs环境变量</span></span><br><span class=\"line\"><span class=\"comment\">// process.env.NODE_ENV = &#x27;development&#x27;;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          MiniCssExtractPlugin.loader,</span><br><span class=\"line\">          <span class=\"string\">&#x27;css-loader&#x27;</span>,</span><br><span class=\"line\">          <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">            css兼容性处理：postcss --&gt; postcss-loader postcss-preset-env</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">            帮postcss找到package.json中browserslist里面的配置，通过配置加载指定的css兼容性样式</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">            &quot;browserslist&quot;: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">              // 开发环境 --&gt; 设置node环境变量：process.env.NODE_ENV = development</span></span><br><span class=\"line\"><span class=\"comment\">              &quot;development&quot;: [</span></span><br><span class=\"line\"><span class=\"comment\">                &quot;last 1 chrome version&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">                &quot;last 1 firefox version&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">                &quot;last 1 safari version&quot;</span></span><br><span class=\"line\"><span class=\"comment\">              ],</span></span><br><span class=\"line\"><span class=\"comment\">              // 生产环境：默认是看生产环境</span></span><br><span class=\"line\"><span class=\"comment\">              &quot;production&quot;: [</span></span><br><span class=\"line\"><span class=\"comment\">                &quot;&gt;0.2%&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">                &quot;not dead&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">                &quot;not op_mini all&quot;</span></span><br><span class=\"line\"><span class=\"comment\">              ]</span></span><br><span class=\"line\"><span class=\"comment\">            &#125;</span></span><br><span class=\"line\"><span class=\"comment\">          */</span></span><br><span class=\"line\">          <span class=\"comment\">// 使用loader的默认配置</span></span><br><span class=\"line\">          <span class=\"comment\">// &#x27;postcss-loader&#x27;,</span></span><br><span class=\"line\">          <span class=\"comment\">// 修改loader的配置</span></span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            <span class=\"attr\">loader</span>: <span class=\"string\">&#x27;postcss-loader&#x27;</span>,</span><br><span class=\"line\">            <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">              <span class=\"attr\">ident</span>: <span class=\"string\">&#x27;postcss&#x27;</span>,</span><br><span class=\"line\">              <span class=\"attr\">plugins</span>: <span class=\"function\">() =&gt;</span> [</span><br><span class=\"line\">                <span class=\"comment\">// postcss的插件</span></span><br><span class=\"line\">                <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;postcss-preset-env&#x27;</span>)()</span><br><span class=\"line\">              ]</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">        <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">        语法检查： eslint-loader  eslint</span></span><br><span class=\"line\"><span class=\"comment\">          注意：只检查自己写的源代码，第三方的库是不用检查的</span></span><br><span class=\"line\"><span class=\"comment\">          设置检查规则：</span></span><br><span class=\"line\"><span class=\"comment\">            package.json中eslintConfig中设置~</span></span><br><span class=\"line\"><span class=\"comment\">              &quot;eslintConfig&quot;: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">                &quot;extends&quot;: &quot;airbnb-base&quot;</span></span><br><span class=\"line\"><span class=\"comment\">              &#125;</span></span><br><span class=\"line\"><span class=\"comment\">            airbnb --&gt; eslint-config-airbnb-base  eslint-plugin-import eslint</span></span><br><span class=\"line\"><span class=\"comment\">      */</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;eslint-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"comment\">// 自动修复eslint的错误</span></span><br><span class=\"line\">          <span class=\"attr\">fix</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">        <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">        js兼容性处理：babel-loader @babel/core </span></span><br><span class=\"line\"><span class=\"comment\">          1. 基本js兼容性处理 --&gt; @babel/preset-env</span></span><br><span class=\"line\"><span class=\"comment\">            问题：只能转换基本语法，如promise高级语法不能转换</span></span><br><span class=\"line\"><span class=\"comment\">          2. 全部js兼容性处理 --&gt; @babel/polyfill  </span></span><br><span class=\"line\"><span class=\"comment\">            问题：我只要解决部分兼容性问题，但是将所有兼容性代码全部引入，体积太大了~</span></span><br><span class=\"line\"><span class=\"comment\">          3. 需要做兼容性处理的就做：按需加载  --&gt; core-js</span></span><br><span class=\"line\"><span class=\"comment\">      */</span>  </span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;babel-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"comment\">// 预设：指示babel做怎么样的兼容性处理</span></span><br><span class=\"line\">          <span class=\"attr\">presets</span>: [</span><br><span class=\"line\">            [</span><br><span class=\"line\">              <span class=\"string\">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 按需加载</span></span><br><span class=\"line\">                <span class=\"attr\">useBuiltIns</span>: <span class=\"string\">&#x27;usage&#x27;</span>,</span><br><span class=\"line\">                <span class=\"comment\">// 指定core-js版本</span></span><br><span class=\"line\">                <span class=\"attr\">corejs</span>: &#123;</span><br><span class=\"line\">                  <span class=\"attr\">version</span>: <span class=\"number\">3</span></span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                <span class=\"comment\">// 指定兼容性做到哪个版本浏览器</span></span><br><span class=\"line\">                <span class=\"attr\">targets</span>: &#123;</span><br><span class=\"line\">                  <span class=\"attr\">chrome</span>: <span class=\"string\">&#x27;60&#x27;</span>,</span><br><span class=\"line\">                  <span class=\"attr\">firefox</span>: <span class=\"string\">&#x27;60&#x27;</span>,</span><br><span class=\"line\">                  <span class=\"attr\">ie</span>: <span class=\"string\">&#x27;9&#x27;</span>,</span><br><span class=\"line\">                  <span class=\"attr\">safari</span>: <span class=\"string\">&#x27;10&#x27;</span>,</span><br><span class=\"line\">                  <span class=\"attr\">edge</span>: <span class=\"string\">&#x27;17&#x27;</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          ]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span>,</span><br><span class=\"line\">         <span class=\"comment\">// 压缩html代码</span></span><br><span class=\"line\">      <span class=\"attr\">minify</span>: &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 移除空格</span></span><br><span class=\"line\">        <span class=\"attr\">collapseWhitespace</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 移除注释</span></span><br><span class=\"line\">        <span class=\"attr\">removeComments</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> MiniCssExtractPlugin(&#123;</span><br><span class=\"line\">      <span class=\"comment\">// 对输出的css文件进行重命名</span></span><br><span class=\"line\">      <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;css/built.css&#x27;</span></span><br><span class=\"line\">    &#125;), </span><br><span class=\"line\">      <span class=\"comment\">// 压缩css</span></span><br><span class=\"line\">      <span class=\"keyword\">new</span> OptimizeCssAssetsWebpackPlugin()</span><br><span class=\"line\">  ],</span><br><span class=\"line\">     <span class=\"comment\">// 生产环境下会自动压缩js代码</span></span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;production&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"优化环境详细配置\"><a class=\"markdownIt-Anchor\" href=\"#优化环境详细配置\">#</a> 优化环境详细配置</h3>\n<div class=\"tabs\" id=\"\"><ul class=\"nav-tabs\"><li class=\"tab active\"><button type=\"button\" data-href=\"#-1\">开发环境性能优化</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#-2\">生产环境性能优化</button></li></ul><div class=\"tab-contents\"><div class=\"tab-item-content active\" id=\"-1\"><h5 id=\"优化打包构建速度\"><a class=\"markdownIt-Anchor\" href=\"#优化打包构建速度\">#</a> 优化打包构建速度</h5>\n<ul>\n<li>HMR</li>\n</ul>\n<h5 id=\"优化代码调试\"><a class=\"markdownIt-Anchor\" href=\"#优化代码调试\">#</a> 优化代码调试</h5>\n<ul>\n<li>source-map</li>\n</ul><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"-2\"><h5 id=\"优化打包构建速度\"><a class=\"markdownIt-Anchor\" href=\"#优化打包构建速度\">#</a> 优化打包构建速度</h5>\n<ul>\n<li>oneOf</li>\n<li>babel 缓存</li>\n<li>多进程打包</li>\n<li>externals</li>\n<li>dll</li>\n</ul>\n<h5 id=\"优化代码运行的性能\"><a class=\"markdownIt-Anchor\" href=\"#优化代码运行的性能\">#</a> 优化代码运行的性能</h5>\n<ul>\n<li>缓存 (hash-chunkhash-contenthash)</li>\n<li>tree shaking</li>\n<li>code split</li>\n<li>懒加载 / 预加载</li>\n<li>pwa</li>\n</ul><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div></div></div>\n<details green><summary> 所用plugin及loader简介 </summary>\n              <div class='content'>\n              <div class=\"tabs\" id=\"技能列表\"><ul class=\"nav-tabs\"><li class=\"tab active\"><button type=\"button\" data-href=\"#技能列表-1\">HMR</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#技能列表-2\">source-map</button></li></ul><div class=\"tab-contents\"><div class=\"tab-item-content active\" id=\"技能列表-1\"><div class=\"note default flat\"><p><strong>HMR</strong>: hot module replacement 热模块替换 / 模块热替换</p></div><div class=\"note success flat\"><p>** 作用：** 一个模块发生变化，只会重新打包这一个模块（而不是打包所有模块） <wavy>极 大提升构建速度</wavy></p></div><div class=\"note primary flat\"><p>** 样式文件：** 可以使用 HMR 功能：因为 style-loader 内部实现了～</p></div><div class=\"note info flat\"><p>**js 文件：** 默认不能使用 HMR 功能 --&gt; 需要修改 js 代码，添加支持 HMR 功能的代码。</p></div><div class=\"note danger flat\"><p>** 注意：**HMR 功能对 js 的处理，只能处理非入口 js 文件的其他文件。</p></div> <div class=\"note primary flat\"><p><strong>html 文件:</strong> 默认不能使用 HMR 功能.</p></div> <div class=\"note warning flat\"><p>同时会导致<wavy>问题</wavy>：html 文件不能热更新了～（不用做 HMR 功能）</p><p>​    解决：修改 entry 入口，将 html 文件引入</p></div><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"技能列表-2\"><div class=\"note icon flat\"><i class=\"note-icon fab fa-cc-visa\"></i><p><strong>source-map:</strong> 一种  <span class='p green'>提供源代码到构建后代码映射</span>技术 （如果构建后代码出错了，通过映射可以追踪源代码错误）</p></div><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[inline-|hidden-|<span class=\"built_in\">eval</span>-][nosources-][cheap-[<span class=\"built_in\">module</span>-]]source-map</span><br></pre></td></tr></table></figure><div class=\"note blue icon flat\"><i class=\"note-icon fas fa-bullhorn\"></i><p><strong>source-map</strong>：外部</p><p>错误代码准确信息 和 源代码的错误位置</p></div><div class=\"note pink icon flat\"><i class=\"note-icon fas fa-car-crash\"></i><p><strong>inline-source-map</strong>：内联</p><p>只生成一个内联 source-map</p><p>错误代码准确信息 和 源代码的错误位置</p></div><div class=\"note red icon flat\"><i class=\"note-icon fas fa-fan\"></i><p><strong>hidden-source-map</strong>：外部</p><p>错误代码错误原因，但是没有错误位置</p><p>不能追踪源代码错误，只能提示到构建后代码的错误位置</p></div><div class=\"note orange icon flat\"><i class=\"note-icon fas fa-battery-half\"></i><p><strong>eval-source-map</strong>：内联</p><p>每一个文件都生成对应的 source-map，都在 eval</p><p>错误代码准确信息 和 源代码的错误位置</p></div><div class=\"note purple icon flat\"><i class=\"note-icon far fa-hand-scissors\"></i><p><strong>nosources-source-map</strong>：外部</p><p>错误代码准确信息，但是没有任何源代码信息</p></div><div class=\"note green icon flat\"><i class=\"note-icon fab fa-internet-explorer\"></i><p><strong>cheap-source-map</strong>：外部</p><p>错误代码准确信息 和 源代码的错误位置</p><p>只能精确的行</p></div><div class=\"note blue icon flat\"><i class=\"note-icon fas fa-bullhorn\"></i><p><strong>cheap-module-source-map</strong>：外部</p><p>错误代码准确信息 和 源代码的错误位置</p><p>module 会将 loader 的 source map 加入</p></div><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">内联 和 外部的区别：<span class=\"number\">1.</span> 外部生成了文件，内联没有</span><br><span class=\"line\">\t\t\t\t <span class=\"number\">2.</span> 内联构建速度更快</span><br></pre></td></tr></table></figure><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">开发环境：速度快，调试更友好</span><br><span class=\"line\"></span><br><span class=\"line\"> 速度快(<span class=\"built_in\">eval</span>&gt;inline&gt;cheap&gt;...)</span><br><span class=\"line\">       <span class=\"built_in\">eval</span>-cheap-souce-map</span><br><span class=\"line\"> <span class=\"built_in\">eval</span>-source-map</span><br><span class=\"line\"></span><br><span class=\"line\"> 调试更友好 </span><br><span class=\"line\">souce-map       </span><br><span class=\"line\">cheap-<span class=\"built_in\">module</span>-souce-map    </span><br><span class=\"line\">cheap-souce-map</span><br><span class=\"line\"></span><br><span class=\"line\"> --&gt; <span class=\"built_in\">eval</span>-source-map / <span class=\"built_in\">eval</span>-cheap-<span class=\"built_in\">module</span>-souce-map </span><br></pre></td></tr></table></figure><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">生产环境：源代码要不要隐藏? 调试要不要更友好</span><br><span class=\"line\">内联会让代码体积变大，所以在生产环境不用内联</span><br><span class=\"line\"></span><br><span class=\"line\">   nosources-source-map 全部隐藏</span><br><span class=\"line\"></span><br><span class=\"line\">   hidden-source-map 只隐藏源代码，会提示构建后代码错误信息</span><br><span class=\"line\"></span><br><span class=\"line\">   --&gt; source-map / cheap-<span class=\"built_in\">module</span>-souce-map </span><br></pre></td></tr></table></figure><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div></div></div>\n              </div>\n            </details>\n<h4 id=\"开发环境优化配置\"><a class=\"markdownIt-Anchor\" href=\"#开发环境优化配置\">#</a> 开发环境优化配置</h4>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">entry</span>: [<span class=\"string\">&#x27;./src/js/index.js&#x27;</span>, <span class=\"string\">&#x27;./src/index.html&#x27;</span>],</span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">      <span class=\"comment\">// loader的配置</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 处理less资源</span></span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.less$/</span>,</span><br><span class=\"line\">        use: [<span class=\"string\">&#x27;style-loader&#x27;</span>, <span class=\"string\">&#x27;css-loader&#x27;</span>, <span class=\"string\">&#x27;less-loader&#x27;</span>]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 处理css资源</span></span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        use: [<span class=\"string\">&#x27;style-loader&#x27;</span>, <span class=\"string\">&#x27;css-loader&#x27;</span>]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 处理图片资源</span></span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.(jpg|png|gif)$/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;url-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">limit</span>: <span class=\"number\">8</span> * <span class=\"number\">1024</span>,</span><br><span class=\"line\">          <span class=\"attr\">name</span>: <span class=\"string\">&#x27;[hash:10].[ext]&#x27;</span>,</span><br><span class=\"line\">          <span class=\"comment\">// 关闭es6模块化</span></span><br><span class=\"line\">          <span class=\"attr\">esModule</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">          <span class=\"attr\">outputPath</span>: <span class=\"string\">&#x27;imgs&#x27;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 处理html中img资源</span></span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.html$/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;html-loader&#x27;</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 处理其他资源</span></span><br><span class=\"line\">        <span class=\"attr\">exclude</span>: <span class=\"regexp\">/\\.(html|js|css|less|jpg|png|gif)/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;file-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">name</span>: <span class=\"string\">&#x27;[hash:10].[ext]&#x27;</span>,</span><br><span class=\"line\">          <span class=\"attr\">outputPath</span>: <span class=\"string\">&#x27;media&#x27;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"comment\">// plugins的配置</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;development&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">devServer</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">contentBase</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>),</span><br><span class=\"line\">    <span class=\"attr\">compress</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"attr\">port</span>: <span class=\"number\">3000</span>,</span><br><span class=\"line\">    <span class=\"attr\">open</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 开启HMR功能</span></span><br><span class=\"line\">    <span class=\"comment\">// 当修改了webpack配置，新配置要想生效，必须重新webpack服务</span></span><br><span class=\"line\">    <span class=\"attr\">hot</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h4 id=\"生产环境优化配置\"><a class=\"markdownIt-Anchor\" href=\"#生产环境优化配置\">#</a> 生产环境优化配置</h4>\n<div class=\"tabs\" id=\"\"><ul class=\"nav-tabs\"><li class=\"tab active\"><button type=\"button\" data-href=\"#-1\">Oneof</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#-2\">babel缓存</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#-3\">tree shaking</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#-4\">code split</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#-5\">懒加载</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#-6\">PWA</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#-7\">多进程打包</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#-8\">externals</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#-9\">dll</button></li></ul><div class=\"tab-contents\"><div class=\"tab-item-content active\" id=\"-1\"><blockquote>\n<p>正常来讲，所有文件在执行的时候，都要将 loader 中的 rules 过一遍，如果符合，就被对应 loader 处理，不符合则直接过。这样对性能不好，为了解决这个问题，使用 ondeof。</p>\n<p><strong>作用</strong>：提升构建速度，避免每个文件都被所有 loader 过一遍，因为任何一个文件，构建过程中，在遇到第一个与之对应的 loader 后，不会再往下进行。<br>\noneOf 里面的 loader 只匹配一个。不能有两个配置处理同一种类型的文件，如下图，两个 Loader，一个 eslint，一个 babel，他们都处理 Js 文件，那只会第一个生效，第二个不起作用。</p>\n</blockquote><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"-2\"><blockquote>\n<p><strong>babel 缓存</strong></p>\n<p>cacheDirectory: true  --&gt; 让第二次打包构建速度更快</p>\n</blockquote><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"-3\"><blockquote>\n<p>tree shaking：去除无用代码</p>\n<p>前提：1. 必须使用 ES6 模块化 2. 开启 production 环境</p>\n<p>作用：减少代码体积</p>\n</blockquote>\n<p><strong>在 package.json 中配置</strong></p>\n   <figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;sideEffects&quot;</span>: <span class=\"literal\">false</span> </span><br><span class=\"line\">所有代码都没有副作用（都可以进行tree shaking）</span><br><span class=\"line\">问题：可能会把css / @babel/polyfill （副作用）文件干掉</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&quot;sideEffects&quot;</span>: [<span class=\"string\">&quot;*.css&quot;</span>, <span class=\"string\">&quot;*.less&quot;</span>]</span><br></pre></td></tr></table></figure><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"-4\"><blockquote>\n<p>可以定义多入口，将不同的入口文件打包为不同的 chunk, 构建多个单独的 js。还能通过 code splitting 实现模块的动态加载。</p>\n<ol>\n<li>\n<p>可以将 node_modules 中代码单独打包一个 chunk 最终输出</p>\n</li>\n<li>\n<p>自动分析多入口 chunk 中，有没有公共的文件。如果有会打包成单独一个 chunk</p>\n</li>\n</ol>\n</blockquote><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"-5\"><blockquote>\n<p>懒加载<sub>：当文件需要使用时才加载</sub></p>\n<p>预加载 prefetch：会在使用之前，提前加载 js 文件</p>\n<p>正常加载可以认为是并行加载（同一时间加载多个文件）</p>\n<p>预加载 prefetch：等其他资源加载完毕，浏览器空闲了，再偷偷加载资源</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;btn&#x27;</span>).onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">import</span>(<span class=\"comment\">/* webpackChunkName: &#x27;test&#x27;, webpackPrefetch: true */</span><span class=\"string\">&#x27;./test&#x27;</span>).then(<span class=\"function\">(<span class=\"params\">&#123; mul &#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(mul(<span class=\"number\">4</span>, <span class=\"number\">5</span>));</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"-6\"><blockquote>\n<p>PWA: 渐进式网络开发应用程序 (离线可访问)</p>\n</blockquote>\n<blockquote>\n<p>workbox --&gt; workbox-webpack-plugin</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> WorkboxWebpackPlugin.GenerateSW(&#123;</span><br><span class=\"line\">     <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">       1. 帮助serviceworker快速启动</span></span><br><span class=\"line\"><span class=\"comment\">       2. 删除旧的 serviceworker</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">       生成一个 serviceworker 配置文件~</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">     <span class=\"attr\">clientsClaim</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">     <span class=\"attr\">skipWaiting</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">   &#125;)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<ol>\n<li>eslint 不认识 window、navigator 全局变量</li>\n</ol>\n<p><strong>解决</strong>：需要修改 package.json 中 eslintConfig 配置</p>\n<p>“env”: {</p>\n<p>​    “browser”: true // 支持浏览器端全局变量</p>\n<p>}</p>\n<ol start=\"2\">\n<li>\n<p>sw 代码必须运行在服务器上</p>\n<p>–&gt; nodejs</p>\n<p>–&gt;</p>\n</li>\n</ol>\n<p>​    npm i serve -g</p>\n<p>​    serve -s build 启动服务器，将 build 目录下所有资源作为静态资源暴露出去</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 注册serviceWorker</span></span><br><span class=\"line\"><span class=\"comment\">// 处理兼容性问题</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"string\">&#x27;serviceWorker&#x27;</span> <span class=\"keyword\">in</span> navigator) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">&#x27;load&#x27;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    navigator.serviceWorker</span><br><span class=\"line\">      .register(<span class=\"string\">&#x27;/service-worker.js&#x27;</span>)</span><br><span class=\"line\">      .then(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;sw注册成功了~&#x27;</span>);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;sw注册失败了~&#x27;</span>);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"-7\"><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">           <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">           exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">           use: [</span><br><span class=\"line\">             <span class=\"comment\">/* </span></span><br><span class=\"line\"><span class=\"comment\">               开启多进程打包。 </span></span><br><span class=\"line\"><span class=\"comment\">               进程启动大概为600ms，进程通信也有开销。</span></span><br><span class=\"line\"><span class=\"comment\">               只有工作消耗时间比较长，才需要多进程打包</span></span><br><span class=\"line\"><span class=\"comment\">             */</span></span><br><span class=\"line\">             &#123;</span><br><span class=\"line\">               <span class=\"attr\">loader</span>: <span class=\"string\">&#x27;thread-loader&#x27;</span>,</span><br><span class=\"line\">               <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">                 <span class=\"attr\">workers</span>: <span class=\"number\">2</span> <span class=\"comment\">// 进程2个</span></span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">             &#125;,</span><br><span class=\"line\">             &#123;</span><br><span class=\"line\">               <span class=\"attr\">loader</span>: <span class=\"string\">&#x27;babel-loader&#x27;</span>,</span><br><span class=\"line\">               <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">                 <span class=\"attr\">presets</span>: [</span><br><span class=\"line\">                   [</span><br><span class=\"line\">                     <span class=\"string\">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class=\"line\">                     &#123;</span><br><span class=\"line\">                       <span class=\"attr\">useBuiltIns</span>: <span class=\"string\">&#x27;usage&#x27;</span>,</span><br><span class=\"line\">                       <span class=\"attr\">corejs</span>: &#123; <span class=\"attr\">version</span>: <span class=\"number\">3</span> &#125;,</span><br><span class=\"line\">                       <span class=\"attr\">targets</span>: &#123;</span><br><span class=\"line\">                         <span class=\"attr\">chrome</span>: <span class=\"string\">&#x27;60&#x27;</span>,</span><br><span class=\"line\">                         <span class=\"attr\">firefox</span>: <span class=\"string\">&#x27;50&#x27;</span></span><br><span class=\"line\">                       &#125;</span><br><span class=\"line\">                     &#125;</span><br><span class=\"line\">                   ]</span><br><span class=\"line\">                 ],</span><br><span class=\"line\">                 <span class=\"attr\">cacheDirectory</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">             &#125;</span><br><span class=\"line\">           ]</span><br><span class=\"line\">         &#125;,</span><br></pre></td></tr></table></figure><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"-8\"><blockquote>\n<p>排除外部引用资源被打包，（jQuery)</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">externals: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 拒绝jQuery被打包进来</span></span><br><span class=\"line\">    <span class=\"attr\">jquery</span>: <span class=\"string\">&#x27;jQuery&#x27;</span></span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"-9\"><blockquote>\n<p>使用 dll 技术，对某些库（第三方库：jquery、react、vue…）进行单独打包</p>\n<p>当你运行 webpack 时，默认查找 webpack.config.js 配置文件</p>\n<p>需求：需要运行 webpack.dll.js 文件</p>\n<p>–&gt; webpack --config webpack.dll.js</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;webpack&#x27;</span>);</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">entry</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 最终打包生成的[name] --&gt; jquery</span></span><br><span class=\"line\">    <span class=\"comment\">// [&#x27;jquery&#x27;] --&gt; 要打包的库是jquery</span></span><br><span class=\"line\">    <span class=\"attr\">jquery</span>: [<span class=\"string\">&#x27;jquery&#x27;</span>],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;[name].js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;dll&#x27;</span>),</span><br><span class=\"line\">    <span class=\"attr\">library</span>: <span class=\"string\">&#x27;[name]_[hash]&#x27;</span> <span class=\"comment\">// 打包的库里面向外暴露出去的内容叫什么名字</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"comment\">// 打包生成一个 manifest.json --&gt; 提供和jquery映射</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.DllPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">name</span>: <span class=\"string\">&#x27;[name]_[hash]&#x27;</span>, <span class=\"comment\">// 映射库的暴露的内容名称</span></span><br><span class=\"line\">      <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;dll/manifest.json&#x27;</span>) <span class=\"comment\">// 输出文件路径</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;production&#x27;</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div></div></div>\n<div class=\"tabs\" id=\"\"><ul class=\"nav-tabs\"><li class=\"tab active\"><button type=\"button\" data-href=\"#-1\">hash</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#-2\">chunkhash</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#-3\">contenthash</button></li></ul><div class=\"tab-contents\"><div class=\"tab-item-content active\" id=\"-1\"><blockquote>\n<p>​\t\t每次 wepack 构建时会生成一个唯一的 hash 值。</p>\n<pre><code>   问题: 因为js和css同时使用一个hash值。\n</code></pre>\n<p>​        如果重新打包，会导致所有缓存失效。（可能我却只改动一个文件）</p>\n</blockquote>\n<p>​</p><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"-2\"><blockquote>\n<p>根据 chunk 生成的 hash 值。如果打包来源于同一个 chunk，那么 hash 值就一样</p>\n<p>问题: js 和 css 的 hash 值还是一样的</p>\n<p>因为 css 是在 js 中被引入的，所以同属于一个 chunk</p>\n</blockquote><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"-3\"><blockquote>\n<p>根据文件的内容生成 hash 值。不同文件 hash 值一定不一样</p>\n<p>–&gt; 让代码上线运行缓存更好使用</p>\n</blockquote><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div></div></div>\n<h4 id=\"生产环境优化配置-2\"><a class=\"markdownIt-Anchor\" href=\"#生产环境优化配置-2\">#</a> 生产环境优化配置</h4>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> MiniCssExtractPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;mini-css-extract-plugin&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> OptimizeCssAssetsWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;optimize-css-assets-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;webpack&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> AddAssetHtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;add-asset-html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// 定义nodejs环境变量：决定使用browserslist的哪个环境</span></span><br><span class=\"line\">process.env.NODE_ENV = <span class=\"string\">&#x27;production&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 复用loader</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> commonCssLoader = [</span><br><span class=\"line\">  MiniCssExtractPlugin.loader,</span><br><span class=\"line\">  <span class=\"string\">&#x27;css-loader&#x27;</span>,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 还需要在package.json中定义browserslist</span></span><br><span class=\"line\">    <span class=\"attr\">loader</span>: <span class=\"string\">&#x27;postcss-loader&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">ident</span>: <span class=\"string\">&#x27;postcss&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">plugins</span>: <span class=\"function\">() =&gt;</span> [<span class=\"built_in\">require</span>(<span class=\"string\">&#x27;postcss-preset-env&#x27;</span>)()]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class=\"line\">     <span class=\"comment\">//多入口：有一个入口，最终输出就有一个bundle</span></span><br><span class=\"line\">     <span class=\"comment\">/* entry: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        index: &#x27;./src/js/index.js&#x27;,</span></span><br><span class=\"line\"><span class=\"comment\">        test: &#x27;./src/js/test.js&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">        &#125;,*/</span></span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">      <span class=\"comment\">//不指定固定文件名</span></span><br><span class=\"line\">      <span class=\"comment\">//filename: &#x27;js/[name].[contenthash:10].js&#x27;,</span></span><br><span class=\"line\">    <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 在package.json中eslintConfig --&gt; airbnb</span></span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 优先执行</span></span><br><span class=\"line\">        enforce: <span class=\"string\">&#x27;pre&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">loader</span>: <span class=\"string\">&#x27;eslint-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">fix</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 以下loader只会匹配一个</span></span><br><span class=\"line\">        <span class=\"comment\">// 注意：不能有两个配置处理同一种类型文件</span></span><br><span class=\"line\">        <span class=\"attr\">oneOf</span>: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">            use: [...commonCssLoader]</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.less$/</span>,</span><br><span class=\"line\">            use: [...commonCssLoader, <span class=\"string\">&#x27;less-loader&#x27;</span>]</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">            正常来讲，一个文件只能被一个loader处理。</span></span><br><span class=\"line\"><span class=\"comment\">            当一个文件要被多个loader处理，那么一定要指定loader执行的先后顺序：</span></span><br><span class=\"line\"><span class=\"comment\">              先执行eslint 在执行babel</span></span><br><span class=\"line\"><span class=\"comment\">          */</span></span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">            exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">            loader: <span class=\"string\">&#x27;babel-loader&#x27;</span>,</span><br><span class=\"line\">            <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">              <span class=\"attr\">presets</span>: [</span><br><span class=\"line\">                [</span><br><span class=\"line\">                  <span class=\"string\">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class=\"line\">                  &#123;</span><br><span class=\"line\">                    <span class=\"attr\">useBuiltIns</span>: <span class=\"string\">&#x27;usage&#x27;</span>,</span><br><span class=\"line\">                    <span class=\"attr\">corejs</span>: &#123;<span class=\"attr\">version</span>: <span class=\"number\">3</span>&#125;,</span><br><span class=\"line\">                    <span class=\"attr\">targets</span>: &#123;</span><br><span class=\"line\">                      <span class=\"attr\">chrome</span>: <span class=\"string\">&#x27;60&#x27;</span>,</span><br><span class=\"line\">                      <span class=\"attr\">firefox</span>: <span class=\"string\">&#x27;50&#x27;</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                  &#125;</span><br><span class=\"line\">                ]</span><br><span class=\"line\">              ]，</span><br><span class=\"line\">            <span class=\"comment\">// 开启babel缓存</span></span><br><span class=\"line\">              <span class=\"comment\">// 第二次构建时，会读取之前的缓存</span></span><br><span class=\"line\">              <span class=\"attr\">cacheDirectory</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.(jpg|png|gif)/</span>,</span><br><span class=\"line\">            loader: <span class=\"string\">&#x27;url-loader&#x27;</span>,</span><br><span class=\"line\">            <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">              <span class=\"attr\">limit</span>: <span class=\"number\">8</span> * <span class=\"number\">1024</span>,</span><br><span class=\"line\">              <span class=\"attr\">name</span>: <span class=\"string\">&#x27;[hash:10].[ext]&#x27;</span>,</span><br><span class=\"line\">              <span class=\"attr\">outputPath</span>: <span class=\"string\">&#x27;imgs&#x27;</span>,</span><br><span class=\"line\">              <span class=\"attr\">esModule</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.html$/</span>,</span><br><span class=\"line\">            loader: <span class=\"string\">&#x27;html-loader&#x27;</span></span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            <span class=\"attr\">exclude</span>: <span class=\"regexp\">/\\.(js|css|less|html|jpg|png|gif)/</span>,</span><br><span class=\"line\">            loader: <span class=\"string\">&#x27;file-loader&#x27;</span>,</span><br><span class=\"line\">            <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">              <span class=\"attr\">outputPath</span>: <span class=\"string\">&#x27;media&#x27;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">      <span class=\"comment\">// 告诉webpack哪些库不参与打包，同时使用时的名称也得变~</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.DllReferencePlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">manifest</span>: resolve(__dirname, <span class=\"string\">&#x27;dll/manifest.json&#x27;</span>)</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"comment\">// 将某个文件打包输出去，并在html中自动引入该资源</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> AddAssetHtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">filepath</span>: resolve(__dirname, <span class=\"string\">&#x27;dll/jquery.js&#x27;</span>)</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> MiniCssExtractPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;css/built.css&#x27;</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> OptimizeCssAssetsWebpackPlugin(),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">minify</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">collapseWhitespace</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"attr\">removeComments</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> WorkboxWebpackPlugin.GenerateSW(&#123;</span><br><span class=\"line\">      <span class=\"comment\">/*PWA配置</span></span><br><span class=\"line\"><span class=\"comment\">        1. 帮助serviceworker快速启动</span></span><br><span class=\"line\"><span class=\"comment\">        2. 删除旧的 serviceworker</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">        生成一个 serviceworker 配置文件~</span></span><br><span class=\"line\"><span class=\"comment\">      */</span></span><br><span class=\"line\">      <span class=\"attr\">clientsClaim</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"attr\">skipWaiting</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    1. 可以将node_modules中代码单独打包一个chunk最终输出</span></span><br><span class=\"line\"><span class=\"comment\">    2. 自动分析多入口chunk中，有没有公共的文件。如果有会打包成单独一个chunk</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  <span class=\"attr\">optimization</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">splitChunks</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">chunks</span>: <span class=\"string\">&#x27;all&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;production&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">externals</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 拒绝jQuery被打包进来</span></span><br><span class=\"line\">    <span class=\"attr\">jquery</span>: <span class=\"string\">&#x27;jQuery&#x27;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "Webpack"
            ]
        }
    ]
}